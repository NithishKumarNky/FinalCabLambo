<!DOCTYPE html>
<html>
<head>
    <title>Calculate Rate</title>
</head>
<body>
    <script>
        const params = new URLSearchParams(window.location.search);
        const origin = params.get("origin");
        const destination = params.get("destination");
        const [lat1, lon1] = origin.split(",");
        const [lat2, lon2] = destination.split(",");

        function calcDistance(lat1, lon1, lat2, lon2) {
            const earthRadiusKm = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            lat1 = lat1 * Math.PI / 180;
            lat2 = lat2 * Math.PI / 180;
            const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return earthRadiusKm * c;
        }

        const distance = calcDistance(lat1, lon1, lat2, lon2);

        // index.html

localStorage.setItem('dis', distance);
window.location.href = 'cartypedemo.html';
        const rate = distance * 15; // rate is 10 Rs per km
        document.write(`Distance: ${distance.toFixed(2)} km<br>Rate: Rs ${rate.toFixed(2)}`);

        
    </script>
    
    </script>
</body>
</html>